<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Translater by CMM</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f5f4ff;
    --surface: #ffffff;
    --surface2: #f0eeff;
    --accent: #7c3aed;
    --accent2: #a855f7;
    --accent3: #06b6d4;
    --gold: #f59e0b;
    --text: #1a1630;
    --muted: #8b87aa;
    --border: rgba(124,58,237,0.15);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    font-family: 'DM Sans', sans-serif;
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed; inset: 0;
    background: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(124,58,237,0.1), transparent),
                radial-gradient(ellipse 60% 40% at 80% 80%, rgba(6,182,212,0.06), transparent);
    pointer-events: none; z-index: 0;
  }

  .app { position: relative; z-index: 1; max-width: 980px; margin: 0 auto; padding: 24px 16px; }

  /* HEADER */
  header {
    text-align: center;
    padding: 32px 0 40px;
  }
  .logo-badge {
    display: inline-flex; align-items: center; gap: 8px;
    background: linear-gradient(135deg, rgba(124,58,237,0.2), rgba(6,182,212,0.1));
    border: 1px solid var(--border);
    border-radius: 100px;
    padding: 6px 18px;
    font-size: 11px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase;
    color: var(--accent2); margin-bottom: 16px;
  }
  .logo-badge span { width: 6px; height: 6px; background: var(--accent3); border-radius: 50%; animation: pulse 2s infinite; }
  @keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.5;transform:scale(1.3)} }

  h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2.2rem, 6vw, 3.8rem);
    font-weight: 900;
    background: linear-gradient(135deg, #f1f0ff 30%, #a855f7 70%, #06b6d4);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    line-height: 1.1; margin-bottom: 10px;
  }
  .tagline { color: var(--muted); font-size: 15px; font-weight: 400; }

  /* FEATURE PILLS */
  .features {
    display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin: 20px 0 32px;
  }
  .pill {
    display: flex; align-items: center; gap: 6px;
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 100px; padding: 6px 14px;
    font-size: 12px; font-weight: 500; color: var(--muted);
    transition: all .2s;
  }
  .pill:hover { border-color: var(--accent2); color: var(--text); }
  .pill-icon { font-size: 14px; }

  /* MAIN CARD */
  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 4px 40px rgba(124,58,237,0.10);
  }

  /* LANG BAR */
  .lang-bar {
    display: flex; align-items: center; gap: 0;
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
    background: var(--surface2);
  }
  .lang-select-wrap { flex: 1; position: relative; }
  .lang-select-wrap::after {
    content: '‚ñæ'; position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
    color: var(--accent2); pointer-events: none; font-size: 12px;
  }
  select {
    width: 100%; background: transparent;
    border: 1px solid var(--border); border-radius: 12px;
    color: var(--text); font-family: 'DM Sans', sans-serif;
    font-size: 14px; font-weight: 500;
    padding: 10px 36px 10px 14px;
    appearance: none; cursor: pointer;
    transition: border-color .2s;
  }
  select:hover, select:focus { outline: none; border-color: var(--accent2); }
  select option { background: #ffffff; color: #1a1630; }

  .swap-btn {
    width: 42px; height: 42px; border-radius: 12px;
    background: linear-gradient(135deg, var(--accent), var(--accent3));
    border: none; cursor: pointer; color: white;
    font-size: 16px; display: flex; align-items: center; justify-content: center;
    margin: 0 12px; flex-shrink: 0;
    transition: transform .2s, box-shadow .2s;
    box-shadow: 0 4px 15px rgba(124,58,237,0.3);
  }
  .swap-btn:hover { transform: rotate(180deg) scale(1.05); box-shadow: 0 6px 20px rgba(124,58,237,0.5); }

  /* TEXT AREAS */
  .text-panels {
    display: grid; grid-template-columns: 1fr 1fr;
    gap: 0;
  }
  @media(max-width:640px){ .text-panels { grid-template-columns: 1fr; } }

  .panel {
    padding: 20px;
    position: relative;
    transition: background .2s;
  }
  .panel:first-child { border-right: 1px solid var(--border); }
  .panel:first-child:focus-within { background: rgba(124,58,237,0.03); }

  .panel-label {
    font-size: 11px; font-weight: 600; letter-spacing: 1.5px;
    text-transform: uppercase; color: var(--muted); margin-bottom: 10px;
    display: flex; align-items: center; justify-content: space-between;
  }
  .char-count { font-size: 11px; color: var(--muted); }

  textarea {
    width: 100%; min-height: 180px; resize: none;
    background: transparent; border: none;
    color: var(--text); font-family: 'DM Sans', sans-serif;
    font-size: 16px; font-weight: 400; line-height: 1.6;
    outline: none;
  }
  textarea::placeholder { color: var(--muted); }

  .output-text {
    min-height: 180px; font-size: 16px; line-height: 1.6;
    color: var(--text); word-break: break-word;
  }
  .output-placeholder { color: var(--muted); font-style: italic; }

  /* ACTIONS */
  .actions {
    display: flex; align-items: center; gap: 10px;
    padding: 14px 20px;
    border-top: 1px solid var(--border);
    background: var(--surface2);
    flex-wrap: wrap;
  }

  .btn {
    display: flex; align-items: center; gap: 7px;
    padding: 9px 18px; border-radius: 10px;
    font-family: 'DM Sans', sans-serif; font-size: 13px; font-weight: 600;
    cursor: pointer; border: none; transition: all .2s;
  }
  .btn-primary {
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: white;
    box-shadow: 0 4px 15px rgba(124,58,237,0.35);
    flex: 1; justify-content: center; max-width: 180px;
  }
  .btn-primary:hover { box-shadow: 0 6px 25px rgba(124,58,237,0.55); transform: translateY(-1px); }
  .btn-primary:active { transform: translateY(0); }
  .btn-primary:disabled { opacity: .5; cursor: not-allowed; transform: none; }

  .btn-ghost {
    background: transparent; color: var(--muted);
    border: 1px solid var(--border);
  }
  .btn-ghost:hover { border-color: var(--accent2); color: var(--accent); background: rgba(124,58,237,0.06); }

  .btn-icon { width: 36px; height: 36px; padding: 0; justify-content: center; font-size: 15px; }

  .auto-translate {
    display: flex; align-items: center; gap: 8px;
    font-size: 12px; color: var(--muted); margin-left: auto;
  }
  .toggle {
    width: 36px; height: 20px; border-radius: 10px;
    background: var(--surface2); border: 1px solid var(--border);
    position: relative; cursor: pointer; transition: background .2s;
  }
  .toggle.on { background: var(--accent); border-color: var(--accent); }
  .toggle::after {
    content: ''; position: absolute; top: 2px; left: 2px;
    width: 14px; height: 14px; border-radius: 50%;
    background: white; transition: transform .2s;
  }
  .toggle.on::after { transform: translateX(16px); }

  /* LOADING */
  .loading { display: flex; align-items: center; gap: 8px; color: var(--accent2); font-size: 14px; }
  .dots span {
    display: inline-block; width: 5px; height: 5px; border-radius: 50%;
    background: var(--accent2); margin: 0 2px;
    animation: bounce .9s infinite;
  }
  .dots span:nth-child(2) { animation-delay: .15s; }
  .dots span:nth-child(3) { animation-delay: .3s; }
  @keyframes bounce { 0%,80%,100%{transform:translateY(0)} 40%{transform:translateY(-6px)} }

  /* TOOLS */
  .tools {
    display: flex; gap: 10px; flex-wrap: wrap;
    padding: 16px 20px;
    border-top: 1px solid var(--border);
  }
  .tool-card {
    flex: 1; min-width: 130px;
    background: var(--surface2); border: 1px solid var(--border);
    border-radius: 14px; padding: 14px 16px;
    cursor: pointer; transition: all .2s; text-align: center;
  }
  .tool-card:hover { border-color: var(--accent2); background: rgba(124,58,237,0.06); transform: translateY(-2px); }
  .tool-icon { font-size: 22px; margin-bottom: 6px; }
  .tool-name { font-size: 12px; font-weight: 600; color: var(--text); }
  .tool-desc { font-size: 11px; color: var(--muted); margin-top: 2px; }

  /* HISTORY */
  .history-section { margin-top: 28px; }
  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: 18px; font-weight: 700; margin-bottom: 14px;
    display: flex; align-items: center; gap: 10px;
  }
  .section-title::after {
    content: ''; flex: 1; height: 1px; background: var(--border);
  }
  .history-list { display: flex; flex-direction: column; gap: 8px; }
  .history-item {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 14px; padding: 14px 16px;
    cursor: pointer; transition: all .2s;
    display: grid; grid-template-columns: 1fr 24px 1fr; gap: 10px; align-items: center;
  }
  .history-item:hover { border-color: var(--accent2); background: rgba(124,58,237,0.04); }
  .history-text { font-size: 13px; }
  .history-orig { color: var(--muted); }
  .history-trans { color: var(--text); }
  .history-arrow { color: var(--accent2); text-align: center; font-size: 14px; }
  .history-lang { font-size: 10px; color: var(--accent3); font-weight: 600; letter-spacing: 1px; text-transform: uppercase; margin-top: 3px; }

  /* TOAST */
  .toast {
    position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%) translateY(20px);
    background: #ffffff; border: 1px solid var(--accent2);
    color: var(--text); padding: 10px 22px; border-radius: 100px;
    font-size: 13px; font-weight: 500; z-index: 999;
    opacity: 0; transition: all .3s;
    display: flex; align-items: center; gap: 8px;
    box-shadow: 0 8px 30px rgba(124,58,237,0.15);
  }
  .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

  /* LANG COUNT badge */
  .lang-count {
    display: inline-flex; align-items: center; justify-content: center;
    background: linear-gradient(135deg, var(--accent), var(--accent3));
    color: white; border-radius: 100px;
    font-size: 10px; font-weight: 700; padding: 2px 7px; letter-spacing: .5px;
    margin-left: 6px;
  }

  /* Error */
  .error-msg { color: #f87171; font-size: 13px; margin-top: 4px; }

  @media(max-width:640px){
    .panel:first-child { border-right: none; border-bottom: 1px solid var(--border); }
    .btn-primary { max-width: 100%; }
  }
</style>
</head>
<body>

<div class="app">
  <!-- HEADER -->
  <header>
    <div class="logo-badge"><span></span> AI Powered ¬∑ CMM</div>
    <h1>Translater by CMM</h1>
    <p class="tagline">Duniya ki koi bhi bhasha, ek click mein ‚Äî <strong>100+ languages</strong> supported</p>
    <div class="features">
      <div class="pill"><span class="pill-icon">üåç</span> 100+ Languages</div>
      <div class="pill"><span class="pill-icon">‚ö°</span> Instant AI Translation</div>
      <div class="pill"><span class="pill-icon">üìã</span> Copy & Share</div>
      <div class="pill"><span class="pill-icon">üîä</span> Text to Speech</div>
      <div class="pill"><span class="pill-icon">üìú</span> History</div>
      <div class="pill"><span class="pill-icon">üîÑ</span> Auto Translate</div>
    </div>
  </header>

  <!-- MAIN CARD -->
  <div class="card">
    <!-- LANG BAR -->
    <div class="lang-bar">
      <div class="lang-select-wrap">
        <select id="sourceLang">
          <option value="auto">üîç Auto Detect</option>
        </select>
      </div>
      <button class="swap-btn" id="swapBtn" title="Swap languages">‚áÑ</button>
      <div class="lang-select-wrap">
        <select id="targetLang"></select>
      </div>
    </div>

    <!-- TEXT PANELS -->
    <div class="text-panels">
      <div class="panel">
        <div class="panel-label">
          <span>Input Text</span>
          <span class="char-count" id="charCount">0 / 2000</span>
        </div>
        <textarea id="inputText" placeholder="Yahan kuch likho... Type here in any language..." maxlength="2000"></textarea>
      </div>
      <div class="panel" id="outputPanel">
        <div class="panel-label">
          <span>Translation</span>
          <div style="display:flex;gap:6px">
            <button class="btn btn-ghost btn-icon" id="copyBtn" title="Copy Translation">üìã</button>
            <button class="btn btn-ghost btn-icon" id="speakBtn" title="Listen">üîä</button>
          </div>
        </div>
        <div class="output-text" id="outputText">
          <span class="output-placeholder">Translation yahan dikhegi...</span>
        </div>
      </div>
    </div>

    <!-- ACTIONS -->
    <div class="actions">
      <button class="btn btn-primary" id="translateBtn">
        ‚ú® Translate
      </button>
      <button class="btn btn-ghost" id="clearBtn">üóë Clear</button>
      <div class="auto-translate">
        <span>Auto</span>
        <div class="toggle" id="autoToggle"></div>
      </div>
    </div>

    <!-- TOOLS -->
    <div class="tools">
      <div class="tool-card" id="formalBtn">
        <div class="tool-icon">üé©</div>
        <div class="tool-name">Formal Tone</div>
        <div class="tool-desc">Professional language</div>
      </div>
      <div class="tool-card" id="casualBtn">
        <div class="tool-icon">üòä</div>
        <div class="tool-name">Casual Tone</div>
        <div class="tool-desc">Friendly & relaxed</div>
      </div>
      <div class="tool-card" id="simplifyBtn">
        <div class="tool-icon">üí°</div>
        <div class="tool-name">Simplify</div>
        <div class="tool-desc">Easy words only</div>
      </div>
      <div class="tool-card" id="improveBtn">
        <div class="tool-icon">‚úçÔ∏è</div>
        <div class="tool-name">Improve</div>
        <div class="tool-desc">Better phrasing</div>
      </div>
      <div class="tool-card" id="detectBtn">
        <div class="tool-icon">üîç</div>
        <div class="tool-name">Detect Lang</div>
        <div class="tool-desc">Find language</div>
      </div>
    </div>
  </div>

  <!-- HISTORY -->
  <div class="history-section" id="historySection" style="display:none">
    <div class="section-title">üìú Recent Translations</div>
    <div class="history-list" id="historyList"></div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script>
const LANGUAGES = [
  ["af","Afrikaans"],["sq","Albanian"],["am","Amharic"],["ar","Arabic"],["hy","Armenian"],
  ["az","Azerbaijani"],["eu","Basque"],["be","Belarusian"],["bn","Bengali"],["bs","Bosnian"],
  ["bg","Bulgarian"],["ca","Catalan"],["ceb","Cebuano"],["zh","Chinese (Simplified)"],["zh-TW","Chinese (Traditional)"],
  ["co","Corsican"],["hr","Croatian"],["cs","Czech"],["da","Danish"],["nl","Dutch"],
  ["en","English"],["eo","Esperanto"],["et","Estonian"],["fi","Finnish"],["fr","French"],
  ["fy","Frisian"],["gl","Galician"],["ka","Georgian"],["de","German"],["el","Greek"],
  ["gu","Gujarati"],["ht","Haitian Creole"],["ha","Hausa"],["haw","Hawaiian"],["iw","Hebrew"],
  ["hi","Hindi"],["hmn","Hmong"],["hu","Hungarian"],["is","Icelandic"],["ig","Igbo"],
  ["id","Indonesian"],["ga","Irish"],["it","Italian"],["ja","Japanese"],["jw","Javanese"],
  ["kn","Kannada"],["kk","Kazakh"],["km","Khmer"],["ko","Korean"],["ku","Kurdish"],
  ["ky","Kyrgyz"],["lo","Lao"],["la","Latin"],["lv","Latvian"],["lt","Lithuanian"],
  ["lb","Luxembourgish"],["mk","Macedonian"],["mg","Malagasy"],["ms","Malay"],["ml","Malayalam"],
  ["mt","Maltese"],["mi","Maori"],["mr","Marathi"],["mn","Mongolian"],["my","Myanmar"],
  ["ne","Nepali"],["no","Norwegian"],["ny","Nyanja"],["or","Odia"],["ps","Pashto"],
  ["fa","Persian"],["pl","Polish"],["pt","Portuguese"],["pa","Punjabi"],["ro","Romanian"],
  ["ru","Russian"],["sm","Samoan"],["gd","Scots Gaelic"],["sr","Serbian"],["st","Sesotho"],
  ["sn","Shona"],["sd","Sindhi"],["si","Sinhala"],["sk","Slovak"],["sl","Slovenian"],
  ["so","Somali"],["es","Spanish"],["su","Sundanese"],["sw","Swahili"],["sv","Swedish"],
  ["tl","Tagalog / Filipino"],["tg","Tajik"],["ta","Tamil"],["tt","Tatar"],["te","Telugu"],
  ["th","Thai"],["tr","Turkish"],["tk","Turkmen"],["uk","Ukrainian"],["ur","Urdu"],
  ["ug","Uyghur"],["uz","Uzbek"],["vi","Vietnamese"],["cy","Welsh"],["xh","Xhosa"],
  ["yi","Yiddish"],["yo","Yoruba"],["zu","Zulu"]
];

// Populate selects
const sourceSel = document.getElementById('sourceLang');
const targetSel = document.getElementById('targetLang');
LANGUAGES.forEach(([code, name]) => {
  sourceSel.innerHTML += `<option value="${code}">${name}</option>`;
  targetSel.innerHTML += `<option value="${code}">${name}</option>`;
});
// Default target = Hindi
targetSel.value = 'hi';

// State
let history = JSON.parse(localStorage.getItem('cmm_history') || '[]');
let autoMode = false;
let autoTimer = null;
let currentTranslation = '';

// Char count
document.getElementById('inputText').addEventListener('input', () => {
  const len = document.getElementById('inputText').value.length;
  document.getElementById('charCount').textContent = `${len} / 2000`;
  if (autoMode) {
    clearTimeout(autoTimer);
    autoTimer = setTimeout(doTranslate, 800);
  }
});

// Auto toggle
document.getElementById('autoToggle').addEventListener('click', function() {
  autoMode = !autoMode;
  this.classList.toggle('on', autoMode);
});

// Swap
document.getElementById('swapBtn').addEventListener('click', () => {
  const sv = sourceSel.value;
  const tv = targetSel.value;
  if (sv === 'auto') { showToast('‚ö†Ô∏è Auto detect cannot be swapped'); return; }
  sourceSel.value = tv;
  targetSel.value = sv;
  // Also swap text
  const inp = document.getElementById('inputText');
  if (currentTranslation) {
    inp.value = currentTranslation;
    inp.dispatchEvent(new Event('input'));
    setOutput('<span class="output-placeholder">Translation yahan dikhegi...</span>');
    currentTranslation = '';
  }
});

// Translate button
document.getElementById('translateBtn').addEventListener('click', doTranslate);

async function doTranslate(tone = '') {
  const text = document.getElementById('inputText').value.trim();
  if (!text) { showToast('‚ö†Ô∏è Pehle kuch likho!'); return; }
  const src = sourceSel.options[sourceSel.selectedIndex].text;
  const tgt = targetSel.options[targetSel.selectedIndex].text;
  const btn = document.getElementById('translateBtn');
  btn.disabled = true;

  setOutput('<div class="loading">Translating <div class="dots"><span></span><span></span><span></span></div></div>');

  let prompt = '';
  if (tone === 'formal') prompt = `Translate the following text to ${tgt} using formal, professional tone. Return ONLY the translation, nothing else.\n\nText: ${text}`;
  else if (tone === 'casual') prompt = `Translate the following text to ${tgt} using casual, friendly tone. Return ONLY the translation, nothing else.\n\nText: ${text}`;
  else if (tone === 'simplify') prompt = `Translate the following text to ${tgt} using very simple, easy-to-understand words. Return ONLY the translation, nothing else.\n\nText: ${text}`;
  else if (tone === 'improve') prompt = `Translate the following text to ${tgt} with improved, eloquent phrasing. Return ONLY the translation, nothing else.\n\nText: ${text}`;
  else if (tone === 'detect') prompt = `Identify the language of this text and give me the language name and a brief description. Text: "${text}"`;
  else prompt = `Translate the following text from ${src === 'üîç Auto Detect' ? 'auto-detected language' : src} to ${tgt}. Return ONLY the translation, nothing else, no explanations.\n\nText: ${text}`;

  try {
    const res = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 1000,
        messages: [{ role: 'user', content: prompt }]
      })
    });
    const data = await res.json();
    const result = data.content?.[0]?.text || 'Translation failed.';
    currentTranslation = result;
    setOutput(`<span>${escapeHtml(result)}</span>`);

    if (tone === '' || tone === 'formal' || tone === 'casual' || tone === 'simplify' || tone === 'improve') {
      addHistory(text, result, tgt);
    }
    if (tone === 'detect') showToast('üîç Language detected!');
    else showToast('‚úÖ Translation complete!');
  } catch(e) {
    setOutput('<span class="error-msg">‚ùå Translation failed. Please try again.</span>');
  }
  btn.disabled = false;
}

function setOutput(html) {
  document.getElementById('outputText').innerHTML = html;
}

function escapeHtml(t) {
  return t.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\n/g,'<br>');
}

// Copy
document.getElementById('copyBtn').addEventListener('click', () => {
  if (!currentTranslation) { showToast('‚ö†Ô∏è Pehle translate karo!'); return; }
  navigator.clipboard.writeText(currentTranslation).then(() => showToast('üìã Copied!'));
});

// Speak
document.getElementById('speakBtn').addEventListener('click', () => {
  if (!currentTranslation) { showToast('‚ö†Ô∏è Pehle translate karo!'); return; }
  const utt = new SpeechSynthesisUtterance(currentTranslation);
  const langCode = targetSel.value;
  utt.lang = langCode;
  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(utt);
  showToast('üîä Speaking...');
});

// Clear
document.getElementById('clearBtn').addEventListener('click', () => {
  document.getElementById('inputText').value = '';
  document.getElementById('charCount').textContent = '0 / 2000';
  setOutput('<span class="output-placeholder">Translation yahan dikhegi...</span>');
  currentTranslation = '';
});

// Tool cards
document.getElementById('formalBtn').addEventListener('click', () => doTranslate('formal'));
document.getElementById('casualBtn').addEventListener('click', () => doTranslate('casual'));
document.getElementById('simplifyBtn').addEventListener('click', () => doTranslate('simplify'));
document.getElementById('improveBtn').addEventListener('click', () => doTranslate('improve'));
document.getElementById('detectBtn').addEventListener('click', () => doTranslate('detect'));

// History
function addHistory(orig, trans, lang) {
  history.unshift({ orig, trans, lang, time: Date.now() });
  if (history.length > 10) history.pop();
  localStorage.setItem('cmm_history', JSON.stringify(history));
  renderHistory();
}

function renderHistory() {
  const section = document.getElementById('historySection');
  const list = document.getElementById('historyList');
  if (!history.length) { section.style.display = 'none'; return; }
  section.style.display = 'block';
  list.innerHTML = history.map((h, i) => `
    <div class="history-item" onclick="loadHistory(${i})">
      <div>
        <div class="history-text history-orig">${escapeHtml(h.orig.slice(0,80))}${h.orig.length>80?'‚Ä¶':''}</div>
      </div>
      <div class="history-arrow">‚Üí</div>
      <div>
        <div class="history-text history-trans">${escapeHtml(h.trans.slice(0,80))}${h.trans.length>80?'‚Ä¶':''}</div>
        <div class="history-lang">${h.lang}</div>
      </div>
    </div>
  `).join('');
}

window.loadHistory = (i) => {
  const h = history[i];
  document.getElementById('inputText').value = h.orig;
  document.getElementById('charCount').textContent = `${h.orig.length} / 2000`;
  currentTranslation = h.trans;
  setOutput(`<span>${escapeHtml(h.trans)}</span>`);
  window.scrollTo({ top: 0, behavior: 'smooth' });
  showToast('üìú History loaded!');
};

// Toast
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}

// Init
renderHistory();
</script>
</body>
</html>
